<a id="camel.datagen.self_instruct.filter.instruction_filter"></a>

<a id="camel.datagen.self_instruct.filter.instruction_filter.InstructionFilter"></a>

## InstructionFilter Objects

```python
class InstructionFilter()
```

<a id="camel.datagen.self_instruct.filter.instruction_filter.InstructionFilter.__init__"></a>

#### \_\_init\_\_

```python
def __init__(filters_config: Dict[str, Dict[str, Any]],
             stop_on_first_failure: bool = False)
```

Initialize the InstructionFilter with a dictionary of filter
configurations.

**Arguments**:

  filters_config(Dict[str, Dict[str, Any]]):
  Example filters_config:
  {
- `"length"` - {"min_len": 5, "max_len": 100},
- `"keyword"` - {"keywords": ["image", "video"]},
- `"non_english"` - {},
- `"rouge_similarity"` - {
- `"existing_instructions"` - ["Some existing text"],
- `"threshold"` - 0.6
  }
  }
  Each key in filters_config corresponds to a filter name
  (registered in FILTER_REGISTRY).
  Each value is a dict of parameters for that filter.
- `stop_on_first_failure` _bool_ - If True, stops checking filters after
  the first failure.

<a id="camel.datagen.self_instruct.filter.instruction_filter.InstructionFilter.add_filter"></a>

#### add\_filter

```python
def add_filter(filter_function: FilterFunction)
```

Add a custom filter function to the InstructionFilter.
This allows adding filters that are not in the registry.

**Arguments**:

- `filter_function` _FilterFunction_ - The filter function to be added

<a id="camel.datagen.self_instruct.filter.instruction_filter.InstructionFilter.filter"></a>

#### filter

```python
def filter(
        prompt: str,
        instruction: str,
        return_details: bool = False) -> Union[bool, Tuple[bool, List[str]]]
```

Check if the given instruction passes all filter functions.

**Arguments**:

- `prompt` _str_ - The prompt of generating the instruction.
- `instruction` _str_ - The instruction to evaluate.
- `return_details` _bool_ - If True, returns a tuple (bool, List[str])
  where the list contains the names of filters that failed.
  (default::obj:`False`)
  

**Returns**:

- `bool` - True if the instruction passes all filters, False otherwise.
  OR (bool, List[str]) if return_details is True.

