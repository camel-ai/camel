<a id="camel.toolkits.function_tool"></a>

# camel.toolkits.function\_tool

<a id="camel.toolkits.function_tool.get_openai_function_schema"></a>

#### get\_openai\_function\_schema

```python
def get_openai_function_schema(func: Callable) -> Dict[str, Any]
```

Generates a schema dict for an OpenAI function based on its signature.

This function is deprecated and will be replaced by
:obj:`get_openai_tool_schema()` in future versions. It parses the
function's parameters and docstring to construct a JSON schema-like
dictionary.

**Arguments**:

- `func` _Callable_ - The OpenAI function to generate the schema for.
  

**Returns**:

  Dict[str, Any]: A dictionary representing the JSON schema of the
  function, including its name, description, and parameter
  specifications.

<a id="camel.toolkits.function_tool.get_openai_tool_schema"></a>

#### get\_openai\_tool\_schema

```python
def get_openai_tool_schema(func: Callable) -> Dict[str, Any]
```

Generates an OpenAI JSON schema from a given Python function.

This function creates a schema compatible with OpenAI's API specifications,
based on the provided Python function. It processes the function's
parameters, types, and docstrings, and constructs a schema accordingly.

**Notes**:

  - Each parameter in `func` must have a type annotation; otherwise, it's
  treated as 'Any'.
  - Variable arguments (*args) and keyword arguments (**kwargs) are not
  supported and will be ignored.
  - A functional description including a brief and detailed explanation
  should be provided in the docstring of `func`.
  - All parameters of `func` must be described in its docstring.
  - Supported docstring styles: ReST, Google, Numpydoc, and Epydoc.
  

**Arguments**:

- `func` _Callable_ - The Python function to be converted into an OpenAI
  JSON schema.
  

**Returns**:

  Dict[str, Any]: A dictionary representing the OpenAI JSON schema of
  the provided function.
  

**See Also**:

  `OpenAI API Reference
  <https://platform.openai.com/docs/api-reference/assistants/object>`_

<a id="camel.toolkits.function_tool.sanitize_and_enforce_required"></a>

#### sanitize\_and\_enforce\_required

```python
def sanitize_and_enforce_required(parameters_dict)
```

Cleans and updates the function schema to conform with OpenAI's
requirements:
- Removes invalid 'default' fields from the parameters schema.
- Ensures all fields or function parameters are marked as required.

**Arguments**:

- `parameters_dict` _dict_ - The dictionary representing the function
  schema.
  

**Returns**:

- `dict` - The updated dictionary with invalid defaults removed and all
  fields set as required.

<a id="camel.toolkits.function_tool.generate_docstring"></a>

#### generate\_docstring

```python
def generate_docstring(code: str,
                       model: Optional[BaseModelBackend] = None) -> str
```

Generates a docstring for a given function code using LLM.

This function leverages a language model to generate a
PEP 8/PEP 257-compliant docstring for a provided Python function.
If no model is supplied, a default gpt-4o-mini is used.

**Arguments**:

- `code` _str_ - The source code of the function.
- `model` _Optional[BaseModelBackend]_ - An optional language model backend
  instance. If not provided, a default gpt-4o-mini is used.
  

**Returns**:

- `str` - The generated docstring.

<a id="camel.toolkits.function_tool.FunctionTool"></a>

## FunctionTool Objects

```python
class FunctionTool()
```

An abstraction of a function that OpenAI chat models can call. See
https://platform.openai.com/docs/api-reference/chat/create.

By default, the tool schema will be parsed from the func, or you can
provide a user-defined tool schema to override.

**Arguments**:

- `func` _Callable_ - The function to call. The tool schema is parsed from
  the function signature and docstring by default.
- `openai_tool_schema` _Optional[Dict[str, Any]], optional_ - A
  user-defined OpenAI tool schema to override the default result.
- `(default` - :obj:`None`)
- `synthesize_schema` _Optional[bool], optional_ - Whether to enable the
  use of a schema assistant model to automatically synthesize the
  schema if validation fails or no valid schema is provided.
- `(default` - :obj:`False`)
- `synthesize_schema_model` _Optional[BaseModelBackend], optional_ - An
  assistant model (e.g., an LLM model) used to synthesize the schema
  if `synthesize_schema` is enabled and no valid schema is
  provided. (default: :obj:`None`)
- `synthesize_schema_max_retries` _int, optional_ - The maximum
  number of attempts to retry schema synthesis using the schema
  assistant model if the previous attempts fail. (default: 2)
- `synthesize_output` _Optional[bool], optional_ - Flag for enabling
  synthesis output mode, where output is synthesized based on the
  function's execution. (default: :obj:`False`)
  synthesize_output_model (Optional[BaseModelBackend], optional):
  Model used for output synthesis in synthesis mode.
- `(default` - :obj:`None`)
- `synthesize_output_format` _Optional[Type[BaseModel]], optional_ - Format
  for the response when synthesizing output. (default: :obj:`None`)

<a id="camel.toolkits.function_tool.FunctionTool.validate_openai_tool_schema"></a>

#### validate\_openai\_tool\_schema

```python
@staticmethod
def validate_openai_tool_schema(openai_tool_schema: Dict[str, Any]) -> None
```

Validates the OpenAI tool schema against
:obj:`ToolAssistantToolsFunction`.
This function checks if the provided :obj:`openai_tool_schema` adheres
to the specifications required by OpenAI's
:obj:`ToolAssistantToolsFunction`. It ensures that the function
description and parameters are correctly formatted according to JSON
Schema specifications.

**Arguments**:

- `openai_tool_schema` _Dict[str, Any]_ - The OpenAI tool schema to
  validate.

**Raises**:

- `ValidationError` - If the schema does not comply with the
  specifications.
- `SchemaError` - If the parameters do not meet JSON Schema reference
  specifications.

<a id="camel.toolkits.function_tool.FunctionTool.get_openai_tool_schema"></a>

#### get\_openai\_tool\_schema

```python
def get_openai_tool_schema() -> Dict[str, Any]
```

Gets the OpenAI tool schema for this function.

This method returns the OpenAI tool schema associated with this
function, after validating it to ensure it meets OpenAI's
specifications.

**Returns**:

  Dict[str, Any]: The OpenAI tool schema for this function.

<a id="camel.toolkits.function_tool.FunctionTool.set_openai_tool_schema"></a>

#### set\_openai\_tool\_schema

```python
def set_openai_tool_schema(schema: Dict[str, Any]) -> None
```

Sets the OpenAI tool schema for this function.

Allows setting a custom OpenAI tool schema for this function.

**Arguments**:

- `schema` _Dict[str, Any]_ - The OpenAI tool schema to set.

<a id="camel.toolkits.function_tool.FunctionTool.get_openai_function_schema"></a>

#### get\_openai\_function\_schema

```python
def get_openai_function_schema() -> Dict[str, Any]
```

Gets the schema of the function from the OpenAI tool schema.

This method extracts and returns the function-specific part of the
OpenAI tool schema associated with this function.

**Returns**:

  Dict[str, Any]: The schema of the function within the OpenAI tool
  schema.

<a id="camel.toolkits.function_tool.FunctionTool.set_openai_function_schema"></a>

#### set\_openai\_function\_schema

```python
def set_openai_function_schema(openai_function_schema: Dict[str, Any]) -> None
```

Sets the schema of the function within the OpenAI tool schema.

**Arguments**:

- `openai_function_schema` _Dict[str, Any]_ - The function schema to
  set within the OpenAI tool schema.

<a id="camel.toolkits.function_tool.FunctionTool.get_function_name"></a>

#### get\_function\_name

```python
def get_function_name() -> str
```

Gets the name of the function from the OpenAI tool schema.

**Returns**:

- `str` - The name of the function.

<a id="camel.toolkits.function_tool.FunctionTool.set_function_name"></a>

#### set\_function\_name

```python
def set_function_name(name: str) -> None
```

Sets the name of the function in the OpenAI tool schema.

**Arguments**:

- `name` _str_ - The name of the function to set.

<a id="camel.toolkits.function_tool.FunctionTool.get_function_description"></a>

#### get\_function\_description

```python
def get_function_description() -> str
```

Gets the description of the function from the OpenAI tool
schema.

**Returns**:

- `str` - The description of the function.

<a id="camel.toolkits.function_tool.FunctionTool.set_function_description"></a>

#### set\_function\_description

```python
def set_function_description(description: str) -> None
```

Sets the description of the function in the OpenAI tool schema.

**Arguments**:

- `description` _str_ - The description for the function.

<a id="camel.toolkits.function_tool.FunctionTool.get_paramter_description"></a>

#### get\_paramter\_description

```python
def get_paramter_description(param_name: str) -> str
```

Gets the description of a specific parameter from the function
schema.

**Arguments**:

- `param_name` _str_ - The name of the parameter to get the
  description.
  

**Returns**:

- `str` - The description of the specified parameter.

<a id="camel.toolkits.function_tool.FunctionTool.set_paramter_description"></a>

#### set\_paramter\_description

```python
def set_paramter_description(param_name: str, description: str) -> None
```

Sets the description for a specific parameter in the function
schema.

**Arguments**:

- `param_name` _str_ - The name of the parameter to set the description
  for.
- `description` _str_ - The description for the parameter.

<a id="camel.toolkits.function_tool.FunctionTool.get_parameter"></a>

#### get\_parameter

```python
def get_parameter(param_name: str) -> Dict[str, Any]
```

Gets the schema for a specific parameter from the function schema.

**Arguments**:

- `param_name` _str_ - The name of the parameter to get the schema.
  

**Returns**:

  Dict[str, Any]: The schema of the specified parameter.

<a id="camel.toolkits.function_tool.FunctionTool.set_parameter"></a>

#### set\_parameter

```python
def set_parameter(param_name: str, value: Dict[str, Any])
```

Sets the schema for a specific parameter in the function schema.

**Arguments**:

- `param_name` _str_ - The name of the parameter to set the schema for.
- `value` _Dict[str, Any]_ - The schema to set for the parameter.

<a id="camel.toolkits.function_tool.FunctionTool.synthesize_openai_tool_schema"></a>

#### synthesize\_openai\_tool\_schema

```python
def synthesize_openai_tool_schema(
        max_retries: Optional[int] = None) -> Dict[str, Any]
```

Synthesizes an OpenAI tool schema for the specified function.

This method uses a language model (LLM) to synthesize the OpenAI tool
schema for the specified function by first generating a docstring and
then creating a schema based on the function's source code. The
schema synthesis and validation process is retried up to
`max_retries` times in case of failure.

**Arguments**:

- `max_retries` _Optional[int], optional_ - The maximum number of
  retries for schema synthesis and validation if the process
  fails. (default: :obj:`None`)
  

**Returns**:

  Dict[str, Any]: The synthesis OpenAI tool schema for the function.
  

**Raises**:

- `ValueError` - If schema synthesis or validation fails after the
  maximum number of retries, a ValueError is raised, prompting
  manual schema setting.

<a id="camel.toolkits.function_tool.FunctionTool.synthesize_execution_output"></a>

#### synthesize\_execution\_output

```python
def synthesize_execution_output(
        args: Optional[tuple[Any, ...]] = None,
        kwargs: Optional[Dict[str, Any]] = None) -> Any
```

Synthesizes the output of the function based on the provided
positional arguments and keyword arguments.

**Arguments**:

- `args` _Optional[tuple]_ - Positional arguments to pass to the
  function during synthesis. (default: :obj:`None`)
- `kwargs` _Optional[Dict[str, Any]]_ - Keyword arguments to pass to the
  function during synthesis. (default: :obj:`None`)
  

**Returns**:

- `Any` - Synthesized output from the function execution. If no
  synthesis model is provided, a warning is logged.

<a id="camel.toolkits.function_tool.FunctionTool.parameters"></a>

#### parameters

```python
@property
def parameters() -> Dict[str, Any]
```

Getter method for the property :obj:`parameters`.

**Returns**:

  Dict[str, Any]: the dictionary containing information of
  parameters of this function.

<a id="camel.toolkits.function_tool.FunctionTool.parameters"></a>

#### parameters

```python
@parameters.setter
def parameters(value: Dict[str, Any]) -> None
```

Setter method for the property :obj:`parameters`. It will
firstly check if the input parameters schema is valid. If invalid,
the method will raise :obj:`jsonschema.exceptions.SchemaError`.

**Arguments**:

- `value` _Dict[str, Any]_ - the new dictionary value for the
  function's parameters.

